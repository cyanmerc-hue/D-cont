<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ group.name }} - Preview - D-cont</title>
    <meta name="theme-color" content="#05060A">
    <link rel="stylesheet" href="{{ url_for('static', filename='app.css', v=asset_version) }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json', v=asset_version) }}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='icons/icon-192.png', v=asset_version) }}">
    <link rel="icon" type="image/png" sizes="512x512" href="{{ url_for('static', filename='icons/icon-512.png', v=asset_version) }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/apple-touch-icon.png', v=asset_version) }}">
</head>
<body class="app-body hasTabs">
    {% include '_tab_nav.html' %}

    <div class="container">
        <div class="card">
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="notice" style="margin-bottom:12px; padding:10px 12px;">
              {{ messages[0] }}
            </div>
          {% endif %}
        {% endwith %}

        <div style="display:flex; justify-content:space-between; align-items:center; gap:10px;">
            <h2 style="margin:0;">Confirm Join</h2>
            <a href="/groups" class="btn btn-secondary btn-sm" style="width:auto; padding:8px 12px;">Back</a>
        </div>

        <div class="card-pro" style="margin-top:14px; padding:14px;">
          <div style="font-weight:900;">Confirm Join</div>
          <div class="muted" style="margin-top:8px; line-height:1.6;">
            You are joining:<br>
            <strong>₹{{ group.monthly_amount }} Savings Circle • {{ group.max_members }} Members</strong>
          </div>

          <div class="muted" style="margin-top:10px; line-height:1.6;">
            Monthly contribution: <strong>₹{{ group.monthly_amount }}</strong><br>
            Duration: <strong>{{ group.duration_months }} months</strong><br>
            Payments are made directly via UPI between members.<br>
            D-CONT never holds your money.
          </div>
        </div>

        {% if join_error %}
          <div class="notice" style="margin-top:12px;">
            {{ join_error }}
          </div>
        {% endif %}

        <div class="notice" style="margin-top:12px;">
          <div class="muted" style="line-height:1.45;">Payments are directly between members via UPI. D-CONT never holds money.</div>
        </div>

        <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
            {% if can_join %}
              <form method="post" action="/group/{{ group.id }}/join" style="margin:0;">
                  <button type="submit" class="btn" style="width:auto;">Confirm &amp; Join</button>
              </form>
              <a href="/groups" class="btn btn-secondary" style="width:auto;">Cancel</a>
            {% else %}
              <a href="/groups" class="btn" style="width:auto;">Back to Groups</a>
            {% endif %}
        </div>
        </div>
    </div>
</body>
</html>
